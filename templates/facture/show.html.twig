{% extends 'base.html.twig' %}

{% block title %}Facture
	{{ facture.numeroFacture }}
{% endblock %}

{% block body %}
	<h1 class="text-2xl font-bold mb-6 text-gray-800">ðŸ“„ Facture
		{{ facture.numeroFacture }}</h1>

	<div class="bg-white shadow rounded-lg p-6 mb-6">
		<p>
			<strong>Date :</strong>
			{{ facture.dateFacture|date('d/m/Y') }}</p>
		<p>
			<strong>Fournisseur :</strong>
			{{ facture.nomFournisseur }}</p>
		<p>
			<strong>Acheteur :</strong>
			{{ facture.nomAcheteur }}</p>
		<p>
			<strong>Total HT :</strong>
			{{ facture.totalHT|number_format(2, ',', ' ') }}
			{{ facture.devise }}</p>
		<p>
			<strong>Total TTC :</strong>
			{{ facture.totalTTC|number_format(2, ',', ' ') }}
			{{ facture.devise }}</p>
		<p>
			<strong>Ã‰chÃ©ance :</strong>
			{{ facture.dateEcheance ? facture.dateEcheance|date('d/m/Y') : '-' }}</p>
	</div>

	<h2 class="text-xl font-semibold mb-4">ðŸ§¾ Lignes de la facture</h2>
	<div class="overflow-x-auto">
		<table class="min-w-full text-sm text-left border">
			<thead class="bg-gray-200">
				<tr>
					<th class="px-4 py-2">DÃ©signation</th>
					<th class="px-4 py-2">QuantitÃ©</th>
					<th class="px-4 py-2">PU HT</th>
					<th class="px-4 py-2">TVA</th>
					<th class="px-4 py-2">Montant HT</th>
					<th class="px-4 py-2">Montant TTC</th>
				</tr>
			</thead>
			<tbody class="divide-y">
				{% for ligne in facture.lignes %}
					<tr>
						<td class="px-4 py-2">{{ ligne.designation }}</td>
						<td class="px-4 py-2">{{ ligne.quantite }}</td>
						<td class="px-4 py-2">{{ ligne.prixUnitaireHT|number_format(2, ',', ' ') }}
							{{ facture.devise }}</td>
						<td class="px-4 py-2">{{ ligne.tauxTVA }}
							%</td>
						<td class="px-4 py-2">{{ ligne.montantHT|number_format(2, ',', ' ') }}
							{{ facture.devise }}</td>
						<td class="px-4 py-2">{{ ligne.montantTTC|number_format(2, ',', ' ') }}
							{{ facture.devise }}</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="6" class="px-4 py-2 text-center text-gray-500">Aucune ligne</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

	<div class="mt-6 space-x-2">
		<a href="{{ path('facture_edit', {id: facture.id}) }}" class="px-3 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">Modifier</a>
		<a href="{{ path('facture_index') }}" class="px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Retour</a>
	</div>
{% endblock %}

